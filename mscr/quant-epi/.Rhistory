tail(merall, -15)
17.0/134.8
15.9/133.1
1.984 * 0.05 / sqrt(100)
1.984 * 0.05 / sqrt(100) -> x
0.42 - x
0.42 + x
.05/24
ls()
# Libraries
source("1_libraries.R")
# Data intake
source("2_intake.R")
# Data tidying
source("3_tidy.R")
b1 = -0.0218
exp(b1)
xbar = 84
s = 9.1
u = 74.4
n = 10
t = (xbar - u) / (s * sqrt(n))
t
xbar - u
t = (xbar - u) / (s / sqrt(n))
t
xbar = 747.3
s = 262.2
u = 800
n =40
t = (xbar - u) / (s / sqrt(n))
t
sigma = 9.1
n = 10
(sigma/sqrt(n))^2
u
u = 74.4
xbar = 84
sigma
(xbar - u) / (sigma / sqrt(n))
sigma = 262.2
xbar = 747.3
u = 800
n = 40
(xbar - u) / (sigma / sqrt(n))
u
(sigma/sqrt(n))^2
ls()
knitr::opts_chunk$set(
cache = TRUE,
warning = FALSE,
eval = TRUE,
echo = FALSE,
include = TRUE,
message = FALSE,
dpi = 600,
dev = "png",
options("scipen" = 999, "digits" = 3)
)
# Get to correct data location, and then move back
setwd("~/Box Sync/projects/dyx/code/")
# Libraries
source("1_libraries.R")
# Data intake
source("2_intake.R")
# Data tidying
source("3_tidy.R")
# Go back to quant epi folder
setwd("~/Box Sync/projects/tl1/mscr/quant-epi/")
## Using the compareGroup package
## Demographic data and baseline characteristics
df <- inner_join(df_twins, df_wide, by = 'patid')
df
df$CP
levels(df$CP)
factor(df$CP)
levels(Antilipidemic) <- c("No", "Yes")
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df, {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(CP) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_DYX ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS, data = as.data.frame(tmp))
cmp_tbl
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
cmp_tbl
# Go back to quant epi folder
setwd("~/Box Sync/projects/tl1/mscr/quant-epi/")
ls()
pwd()
getwd()
setwd("~/Box Sync/projects/tl
setwd("~/Box Sync/projects/tl1/mscr/quant-epi/")
getwd()
?createTable
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_DYX ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_Stress, data = as.data.frame(tmp))
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df, {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(Abnormal_DYX) <- c("No", "Yes")
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_DYX ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_Stress, data = as.data.frame(tmp))
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
cmp_tbl
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE, show.ratio = TRUE, show.ci = TRUE, show.p.ratio = TRUE)
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE, show.ratio = TRUE, show.ci = TRUE, show.p.ratio = TRUE)
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE, show.ratio = TRUE, show.ci = TRUE)
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE, show.ci = TRUE, show.p.ratio = TRUE)
cmp_tbl
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
cmp_tbl
df$CP
## Using the compareGroup package
## Demographic data and baseline characteristics
df <- inner_join(df_twins, df_wide, by = 'patid')
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df[df$hour == 7,], {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(Abnormal_DYX) <- c("No", "Yes")
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_DYX ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_Stress, data = as.data.frame(tmp))
cmp_tbl
## Using the compareGroup package
## Demographic data and baseline characteristics
df <- inner_join(df_twins, df_wide[df$hour == 7,], by = 'patid')
df
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df, {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(Abnormal_DYX) <- c("No", "Yes")
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_DYX ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_Stress, data = as.data.frame(tmp))
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
cmp_tbl
glm(PETdiff_2 ~ CP, data = df)
df
?glm
lm(PETdiff_2 ~ CP, data = df)
lm(PETdiff_2 ~ CP, data = df) %>% summary()
chisq.test(df$PETdiff_2, df$CP)
cmp_tbl
glmer(PETdiff_2 ~ CP + (1|pair), data = df)
glmer(PETdiff_2 ~ CP + (1|pair), family = binomial("logit"), data = df)
glmer(PETdiff_2 ~ CP + (1|pair), family = binomial("logit"), data = df) %>% summary()
# Export to markdown
export2md(cmp_tbl)
cmp
?compareGroups
?createTable
## Using the compareGroup package
## Demographic data and baseline characteristics
df <- inner_join(df_twins, df_wide[df$hour == 7,], by = 'patid')
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df, {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(Abnormal_DYX) <- c("No", "Yes")
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_Stress ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_DYX, data = as.data.frame(tmp))
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_Stress ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_DYX, data = as.data.frame(tmp))
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
cmp_tbl
## Using the compareGroup package
## Demographic data and baseline characteristics
df <- inner_join(df_twins, df_wide[df$hour == 7,], by = 'patid')
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df, {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(Abnormal_DYX) <- c("No", "Yes")
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_Stress ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_DYX, data = as.data.frame(tmp))
# Table
cmp_tbl <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
cmp_tbl
?compareGroups
cmp
cmp_tbl
## Using the compareGroup package
## Demographic data and baseline characteristics
df <- inner_join(df_twins, df_wide[df$hour == 7,], by = 'patid')
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df, {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(Abnormal_DYX) <- c("No", "Yes")
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_DYX ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_Stress, data = as.data.frame(tmp))
# Table
cmpTableExposure <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
# Export to markdown
export2md(cmpTableExposure)
## Using the compareGroup package
## Demographic data and baseline characteristics
df <- inner_join(df_twins, df_wide[df$hour == 7,], by = 'patid')
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df, {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(Abnormal_DYX) <- c("No", "Yes")
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_Stress ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_DYX, data = as.data.frame(tmp))
# Table
cmpTableOutcome <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
# Export to markdown
export2md(cmpTableOutcome)
cmpTableExposure
## Using the compareGroup package
## Demographic data and baseline characteristics
df <- inner_join(df_twins, df_wide[df$hour == 7,], by = 'patid')
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df, {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(Abnormal_DYX) <- c("No", "Yes")
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_DYX ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_Stress, data = as.data.frame(tmp))
# Table
cmpTableExposure <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
cmpTableExposure
## Using the compareGroup package
## Demographic data and baseline characteristics
df <- inner_join(df_twins, df_wide[df$hour == 7,], by = 'patid')
# Format appropriate data from numerical into categories
# Adding labels using the Hmisc package to the variables
tmp <- within(df, {
patid <- factor(patid)
pair <- factor(pair)
Age <- age
BMI <- bmi_number
Physical_Activity <- baecke_tot
FRS <- FRS_T
Depression <- beck_total
Smoking <- factor(smoking)
levels(Smoking) <- c("No", "Yes")
Hypertension <- factor(hptn)
levels(Hypertension) <- c("No", "Yes")
Diabetes <- factor(dm)
levels(Diabetes) <- c("No", "Yes")
Antidepressant <- factor(med_antidepr)
levels(Antidepressant) <- c("No", "Yes")
Antilipidemic <- factor(med_lipid_abs)
levels(Antilipidemic) <- c("No", "Yes")
Antihyperglycemic <- factor(med_diabetes_mellitus)
levels(Antihyperglycemic) <- c("No", "Yes")
PTSD <- factor(ptsd)
levels(PTSD) <- c("No", "Yes")
Abnormal_DYX <- factor(CP)
levels(Abnormal_DYX) <- c("No", "Yes")
Abnormal_Stress <- factor(PETdiff_2)
levels(Abnormal_Stress) <- c("No", "Yes")
})
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_DYX ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + Abnormal_Stress, data = as.data.frame(tmp))
# Table
cmpTableExposure <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
cmpTableExposure
cmpTableOutcome
glm(PETdiff_2 ~ CP, data = df)
glm(PETdiff_2 ~ CP, data = na.omit(df))
glm(PETdiff_2 ~ CP, data = df, fmaily = binomial)
glm(PETdiff_2 ~ CP, data = df, family = binomial)
glm(PETdiff_2 ~ CP, data = df, family = binomial) %>% summary()
chisq.test(df$PETdiff_2, df$CP)
# Comparison group of excluded patients
cmp <- compareGroups(Abnormal_Stress ~ Age + BMI + Smoking + Hypertension + Diabetes + PTSD + Depression + Antidepressant + Antilipidemic + Antihyperglycemic + Physical_Activity + FRS + DYX, data = as.data.frame(tmp))
# Table
cmpTableOutcome <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE)
cmpTableOutcome
# Table
cmpTableOutcome <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE, show.CI)
# Table
cmpTableOutcome <- createTable(cmp, show.n = TRUE, show.ratio = FALSE, show.p.overall = TRUE, show.ci = TRUE)
cmpTableOutcome
t.test(PETdiff_2 ~ DYX, data = df)
t.test(DYX ~ PETdiff_2, data = df)
t.test(DYX ~ PETdiff_2, data = df) %>% summary()
t.test(DYX ~ PETdiff_2, data = df) -> x
x$estimate
cmpTableExposure
x
